[gd_scene load_steps=27 format=3 uid="uid://beyy2ckh7wm37"]

[ext_resource type="Texture2D" uid="uid://hlxghl8mdnvb" path="res://assets/Bg.png" id="1_bw3vb"]
[ext_resource type="Script" uid="uid://bxg3inetvj4uq" path="res://scripts/board.gd" id="2_nglv8"]
[ext_resource type="FontFile" uid="uid://bsklm355a5rgr" path="res://assets/pixel_font.ttf" id="2_tx6nw"]
[ext_resource type="Script" uid="uid://43u2qqlaejtv" path="res://scripts/player.gd" id="3_fv4ni"]
[ext_resource type="Script" uid="uid://bur4lgcyf5akd" path="res://scripts/cpu.gd" id="4_dun80"]
[ext_resource type="Script" uid="uid://bflk7km14f5u2" path="res://scripts/ball.gd" id="4_dxjtj"]
[ext_resource type="Script" uid="uid://bvbqdpyw7nn7x" path="res://scripts/goals.gd" id="6_c3r7o"]
[ext_resource type="Script" uid="uid://b6twgfn5wo61h" path="res://scripts/hud.gd" id="7_ar2e0"]
[ext_resource type="StyleBox" uid="uid://dsia64820nm0w" path="res://scenes/PressedButton.tres" id="8_n230i"]
[ext_resource type="ButtonGroup" uid="uid://bi2bq20oav8wm" path="res://scenes/CPUDifficultyButtonGroup.tres" id="8_wmvsh"]
[ext_resource type="Script" uid="uid://mki0ac1p36ym" path="res://scripts/settings.gd" id="9_pnb36"]
[ext_resource type="StyleBox" uid="uid://5s844036715m" path="res://scenes/PlayToScoreStyle.tres" id="10_mvl7x"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tx6nw"]
size = Vector2(20, 120)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nglv8"]
size = Vector2(10, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fv4ni"]
size = Vector2(1152, 64)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dxjtj"]
size = Vector2(1152, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wmvsh"]
size = Vector2(64, 648)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_n230i"]
size = Vector2(64, 648)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dun80"]
size = Vector2(64, 648)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_c3r7o"]
size = Vector2(64, 648)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_c3r7o"]
bg_color = Color(0.24997537, 0.24997537, 0.24997537, 1)
border_width_left = 3
border_width_top = 3
border_width_right = 3
border_width_bottom = 3

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_wmvsh"]
bg_color = Color(0.2509804, 0.2509804, 0.2509804, 1)
border_width_left = 3
border_width_top = 3
border_width_right = 3
border_width_bottom = 3

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_n230i"]
bg_color = Color(0.2509804, 0.2509804, 0.2509804, 1)
border_width_left = 3
border_width_top = 3
border_width_right = 3
border_width_bottom = 3

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_pnb36"]
bg_color = Color(0.2509804, 0.2509804, 0.2509804, 1)
border_width_left = 3
border_width_top = 3
border_width_right = 3
border_width_bottom = 3

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ba0us"]
bg_color = Color(0.2509804, 0.2509804, 0.2509804, 1)
border_width_left = 3
border_width_top = 3
border_width_right = 3
border_width_bottom = 3

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_1huyh"]
bg_color = Color(0.99607843, 0, 0, 1)

[node name="Board" type="Sprite2D"]
texture_filter = 1
texture = ExtResource("1_bw3vb")
centered = false
script = ExtResource("2_nglv8")

[node name="Player" type="StaticBody2D" parent="."]
position = Vector2(50, 324)
script = ExtResource("3_fv4ni")

[node name="ColorRect" type="ColorRect" parent="Player"]
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = -60.0
offset_right = 20.0
offset_bottom = 60.0
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
position = Vector2(10, 0)
shape = SubResource("RectangleShape2D_tx6nw")

[node name="CPU" type="StaticBody2D" parent="."]
position = Vector2(1082, 324)
script = ExtResource("4_dun80")

[node name="ColorRect" type="ColorRect" parent="CPU"]
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = -60.0
offset_right = 20.0
offset_bottom = 60.0
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CPU"]
position = Vector2(10, 0)
shape = SubResource("RectangleShape2D_tx6nw")

[node name="Ball" type="CharacterBody2D" parent="."]
position = Vector2(576, 324)
collision_mask = 3
script = ExtResource("4_dxjtj")

[node name="ColorRect" type="ColorRect" parent="Ball"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -5.0
offset_top = -5.0
offset_right = 5.0
offset_bottom = 5.0
grow_horizontal = 2
grow_vertical = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ball"]
shape = SubResource("RectangleShape2D_nglv8")

[node name="Borders" type="StaticBody2D" parent="."]
collision_layer = 2

[node name="TopBorder" type="CollisionShape2D" parent="Borders"]
position = Vector2(576, -32)
shape = SubResource("RectangleShape2D_fv4ni")

[node name="BottomBorder" type="CollisionShape2D" parent="Borders"]
position = Vector2(576, 676)
shape = SubResource("RectangleShape2D_dxjtj")

[node name="MainMenuBorders" type="StaticBody2D" parent="."]
collision_layer = 4

[node name="LeftBorder" type="CollisionShape2D" parent="MainMenuBorders"]
position = Vector2(-32, 324)
shape = SubResource("RectangleShape2D_wmvsh")

[node name="RightBorder" type="CollisionShape2D" parent="MainMenuBorders"]
position = Vector2(1184, 324)
shape = SubResource("RectangleShape2D_n230i")

[node name="Goals" type="Node2D" parent="."]
script = ExtResource("6_c3r7o")

[node name="GoalLeft" type="Area2D" parent="Goals"]

[node name="GoalLeftCollision" type="CollisionShape2D" parent="Goals/GoalLeft"]
position = Vector2(-32, 324)
shape = SubResource("RectangleShape2D_dun80")

[node name="GoalRight" type="Area2D" parent="Goals"]

[node name="GoalRightCollision" type="CollisionShape2D" parent="Goals/GoalRight"]
position = Vector2(1184, 324)
shape = SubResource("RectangleShape2D_c3r7o")

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("7_ar2e0")

[node name="PlayerScore" type="Label" parent="HUD"]
offset_left = 456.0
offset_top = 5.0
offset_right = 506.0
offset_bottom = 55.0
theme_override_fonts/font = ExtResource("2_tx6nw")
theme_override_font_sizes/font_size = 50
text = "0"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CPUScore" type="Label" parent="HUD"]
offset_left = 648.0
offset_top = 5.0
offset_right = 698.0
offset_bottom = 55.0
theme_override_fonts/font = ExtResource("2_tx6nw")
theme_override_font_sizes/font_size = 50
text = "0"
horizontal_alignment = 1
vertical_alignment = 1

[node name="NewGameButton" type="Button" parent="HUD"]
texture_filter = 1
offset_left = 128.0
offset_top = 224.0
offset_right = 384.0
offset_bottom = 352.0
theme_override_font_sizes/font_size = 27
text = "NEW GAME"

[node name="SettingsButton" type="Button" parent="HUD"]
offset_left = 768.0
offset_top = 224.0
offset_right = 1024.0
offset_bottom = 352.0
theme_override_font_sizes/font_size = 27
text = "Settings"

[node name="Settings" type="CanvasLayer" parent="."]
layer = 2
script = ExtResource("9_pnb36")

[node name="PlayToLabel" type="Label" parent="Settings"]
offset_left = 704.0
offset_top = 384.0
offset_right = 850.0
offset_bottom = 448.0
theme_override_font_sizes/font_size = 19
theme_override_styles/normal = SubResource("StyleBoxFlat_c3r7o")
text = "Play To"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PlayToScore" type="SpinBox" parent="Settings"]
offset_left = 896.0
offset_top = 384.0
offset_right = 982.5625
offset_bottom = 448.0
theme_override_colors/up_icon_modulate = Color(0.875, 0.875, 0.875, 1)
theme_override_colors/up_hover_icon_modulate = Color(0.95, 0.95, 0.95, 1)
theme_override_colors/up_pressed_icon_modulate = Color(0.95, 0.95, 0.95, 1)
theme_override_colors/up_disabled_icon_modulate = Color(0.875, 0.875, 0.875, 0.5)
theme_override_colors/down_icon_modulate = Color(0.875, 0.875, 0.875, 1)
theme_override_colors/down_hover_icon_modulate = Color(0.95, 0.95, 0.95, 1)
theme_override_colors/down_pressed_icon_modulate = Color(0.95, 0.95, 0.95, 1)
theme_override_colors/down_disabled_icon_modulate = Color(0.875, 0.875, 0.875, 0.5)
theme_override_styles/up_background = ExtResource("10_mvl7x")
theme_override_styles/up_background_hovered = ExtResource("10_mvl7x")
theme_override_styles/up_background_pressed = ExtResource("10_mvl7x")
theme_override_styles/up_background_disabled = ExtResource("10_mvl7x")
theme_override_styles/down_background = ExtResource("10_mvl7x")
theme_override_styles/down_background_hovered = ExtResource("10_mvl7x")
theme_override_styles/down_background_pressed = ExtResource("10_mvl7x")
theme_override_styles/down_background_disabled = ExtResource("10_mvl7x")
theme_override_styles/field_and_buttons_separator = ExtResource("10_mvl7x")
theme_override_styles/up_down_buttons_separator = ExtResource("10_mvl7x")
min_value = 1.0
value = 7.0
rounded = true
alignment = 1

[node name="PlayToScoreBorder" type="ReferenceRect" parent="Settings"]
offset_left = 896.0
offset_top = 384.0
offset_right = 994.0
offset_bottom = 448.0
border_color = Color(0.8156863, 0.8156863, 0.8156863, 1)
border_width = 3.0

[node name="CPUDifficultyLabel" type="Label" parent="Settings"]
offset_left = 704.0
offset_top = 128.0
offset_right = 850.0
offset_bottom = 192.0
theme_override_font_sizes/font_size = 19
theme_override_styles/normal = SubResource("StyleBoxFlat_c3r7o")
text = "CPU Difficulty"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CPUDifficultyButtons" type="HBoxContainer" parent="Settings"]
visibility_layer = 2
offset_left = 872.0
offset_top = 128.0
offset_right = 1107.0
offset_bottom = 192.0
alignment = 1

[node name="Easy" type="Button" parent="Settings/CPUDifficultyButtons"]
custom_minimum_size = Vector2(70, 0)
layout_mode = 2
theme_override_styles/normal = SubResource("StyleBoxFlat_wmvsh")
theme_override_styles/pressed = ExtResource("8_n230i")
toggle_mode = true
button_group = ExtResource("8_wmvsh")
text = "Easy"

[node name="Medium" type="Button" parent="Settings/CPUDifficultyButtons"]
custom_minimum_size = Vector2(70, 0)
layout_mode = 2
theme_override_styles/normal = SubResource("StyleBoxFlat_n230i")
theme_override_styles/pressed = ExtResource("8_n230i")
toggle_mode = true
button_pressed = true
button_group = ExtResource("8_wmvsh")
text = "Medium"

[node name="Hard" type="Button" parent="Settings/CPUDifficultyButtons"]
custom_minimum_size = Vector2(70, 0)
layout_mode = 2
theme_override_styles/normal = SubResource("StyleBoxFlat_pnb36")
theme_override_styles/pressed = ExtResource("8_n230i")
toggle_mode = true
button_group = ExtResource("8_wmvsh")
text = "Hard"

[node name="CloseSettings" type="Button" parent="Settings"]
offset_left = 1048.0
offset_top = 64.0
offset_right = 1088.0
offset_bottom = 96.0
theme_override_styles/normal = SubResource("StyleBoxFlat_ba0us")
theme_override_styles/hover = SubResource("StyleBoxFlat_1huyh")
text = "X"

[node name="BallTimer" type="Timer" parent="."]
one_shot = true

[connection signal="cpu_score" from="Goals" to="." method="_on_goals_cpu_score"]
[connection signal="player_score" from="Goals" to="." method="_on_goals_player_score"]
[connection signal="body_entered" from="Goals/GoalLeft" to="Goals" method="_on_goal_left_body_entered"]
[connection signal="body_entered" from="Goals/GoalRight" to="Goals" method="_on_goal_right_body_entered"]
[connection signal="show_settings" from="HUD" to="." method="_on_hud_show_settings"]
[connection signal="start_game" from="HUD" to="." method="_on_hud_start_game"]
[connection signal="pressed" from="HUD/NewGameButton" to="HUD" method="_on_new_game_button_pressed"]
[connection signal="pressed" from="HUD/SettingsButton" to="HUD" method="_on_settings_button_pressed"]
[connection signal="close_settings" from="Settings" to="." method="_on_settings_close_settings"]
[connection signal="cpu_difficulty_changed" from="Settings" to="." method="_on_settings_cpu_difficulty_changed"]
[connection signal="play_to_score_changed" from="Settings" to="." method="_on_settings_play_to_score_changed"]
[connection signal="value_changed" from="Settings/PlayToScore" to="Settings" method="_on_play_to_score_value_changed"]
[connection signal="pressed" from="Settings/CPUDifficultyButtons/Easy" to="Settings" method="_on_easy_pressed"]
[connection signal="pressed" from="Settings/CPUDifficultyButtons/Medium" to="Settings" method="_on_medium_pressed"]
[connection signal="pressed" from="Settings/CPUDifficultyButtons/Hard" to="Settings" method="_on_hard_pressed"]
[connection signal="pressed" from="Settings/CloseSettings" to="Settings" method="_on_close_settings_pressed"]
[connection signal="timeout" from="BallTimer" to="." method="_on_ball_timer_timeout"]
